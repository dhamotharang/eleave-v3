<div class="header" *ngIf="showHeader">
    Your profile completeness is {{progressPercentage}}%
    <ion-progress-bar [value]="progressPercentage/100" color="success"
        style="display:inline-block; width:10%; margin-left: 3%"></ion-progress-bar>
    <ion-icon class="crossIcon" name="close" (click)="showHeader = false;"></ion-icon>
</div>
<ion-card>
    <div style="width: 100%; height:100%; text-align: center; margin-top: -30px" *ngIf="showSpinner">
        <app-spinner></app-spinner>
    </div>
    <ion-card-header *ngIf="showContent">
        <div *ngIf="!showEditProfile" style="right: 25px; position: absolute;" (click)="showEditProfile = true;">
            <div class="edit-profile-icon" [inlineSVG]="'assets/icon/option/edit.svg'"></div>
            <p style="color: #057dcd; display: inline;cursor: pointer;padding-left: 10px">Edit
                Profile</p>
        </div>
        <div class="fullContainer">

            <div class="left">
                <ion-avatar class="avatar">
                    <img src="assets/icon/picture.png">
                </ion-avatar>
                <ion-badge style="background-color: white;border: 1px solid#bebebe;">
                    <div class="pic-icon" [inlineSVG]="'assets/icon/option/picture.svg'"></div>
                </ion-badge>
            </div>
            <div class="right" *ngIf="personalList">
                <ion-card-title>{{personalList.employeeName}}</ion-card-title>
                <div style="display:inline-block; padding-top: 10px;">
                    <ion-card-subtitle class="subtitle">
                        {{personalList.employeeDesignation}}</ion-card-subtitle>
                    <i class="fas fa-circle"></i>
                    <ion-card-subtitle class="subtitle">{{personalList.employeeDepartment}}
                    </ion-card-subtitle>
                </div>
                <div style="padding-top: 10px;">
                    <div class="marker-icon" [inlineSVG]="'assets/icon/user_profile/pin.svg'"></div>
                    <ion-card-subtitle class="subtitle" style="padding-left:8px">{{personalList.employeeLocation}}
                    </ion-card-subtitle>
                </div>
            </div>
        </div>
        <div style="text-align: right;" *ngIf="showEditProfile">
            <ion-button fill="clear" (click)="showEditProfile = false"
                style="font-size: 12px;height: 30px;cursor: pointer;text-transform: none;" color="primary">
                cancel
            </ion-button>
            <div style="display: inline-block"></div>
            <ion-button shape="round" fill="outline" (click)="updateCertificate()"
                style="font-size: 12px;height: 23px;width: 55px;cursor: pointer;text-transform: none;" color="primary">
                save
            </ion-button>
        </div>
    </ion-card-header>
    <ion-item *ngIf="showContent" lines="full" class="mainDivider"></ion-item>
    <div class="cardContent" *ngIf="personalList && showContent">
        <ion-card-content>
            <!------------------------- Add award certification --------------------->
            <!-- <div>
                <ion-label style="display: block; padding-left: 5.6%;padding-top: 5px;">AWARD CERTIFICATION(S)
                </ion-label>
                <ion-row class="detailsRow">
                    <ion-col size="3">
                        <ion-label>CERTIFICATE NAME</ion-label>
                    </ion-col>
                    <ion-col size="3">
                        <ion-label>ENROLL YEAR</ion-label>
                    </ion-col>
                    <ion-col size="3">
                        <ion-label>GRADUATE YEAR</ion-label>
                    </ion-col>
                    <!-- <ion-col size="2">
                        <ion-label>YEAR</ion-label>
                    </ion-col> --
                    <ion-col size="1"></ion-col>
                </ion-row>
                <ion-row class="detailsRow" *ngFor="let item of awards; let index = index">
                    <ion-col size="3">
                        <p *ngIf="!displayEditAward[index]">
                            {{item.certificationName}}</p>
                        <mat-form-field *ngIf="displayEditAward[index]" style="width: 100%;">
                            <input matInput placeholder="Certification Name"
                                [(ngModel)]="awards[index].certificationName">
                        </mat-form-field>
                    </ion-col>
                    <ion-col size="3">
                        <p *ngIf="!displayEditAward[index]">
                            {{item.certificationEnrollYear}}</p>
                        <mat-form-field *ngIf="displayEditAward[index]" style="width: 100%;">
                            <input matInput placeholder="Enroll year"
                                [(ngModel)]="awards[index].certificationEnrollYear">
                        </mat-form-field>
                    </ion-col>
                    <ion-col size="3">
                        <p *ngIf="!displayEditAward[index]">
                            {{item.certificationGraduateYear}}</p>
                        <mat-form-field *ngIf="displayEditAward[index]" style="width: 100%;">
                            <input matInput placeholder="Graduate year"
                                [(ngModel)]="awards[index].certificationGraduateYear">
                        </mat-form-field>
                    </ion-col>
                    <!-- <ion-col size="2">
                        <p *ngIf="!displayEditAward[index]">
                            {{item.year}}</p>
                        <mat-form-field *ngIf="displayEditAward[index]" style="width: 100%;">
                            <input matInput placeholder="Year" [(ngModel)]="awards[index].year">
                        </mat-form-field>
                    </ion-col> --
                    <ion-col size="1">
                        <div class="education-delete-icon" *ngIf="!displayEditAward[index]"
                            [inlineSVG]="'assets/icon/option/trash.svg'" (click)="removeItem(index, awards)">
                        </div>
                        <div class="education-edit-pencil-icon" *ngIf="!displayEditAward[index]"
                            [inlineSVG]="'assets/icon/option/pencil.svg'" (click)="editEducation(index, true)">
                        </div>
                    </ion-col>
                    <div *ngIf="displayEditAward[index]" style="display: block;width: 99.1%;text-align: right;">
                        <ion-button fill="clear" (click)="editEducation(index, false)"
                            style="font-size: 12px;height: 30px;cursor: pointer;text-transform: none;" color="primary">
                            cancel
                        </ion-button>
                        <div style="display: inline-block"></div>
                        <ion-button shape="round" fill="outline" (click)="patchData(); editEducation(index, false)"
                            style="font-size: 12px;height: 23px;width: 55px;cursor: pointer;text-transform: none;"
                            color="primary">
                            save
                        </ion-button>
                    </div>
                </ion-row>
                <ion-row class="detailsRow">
                    <ion-icon name="add-circle-outline" style="color: #057dcd;padding-top: 2px;padding-right: 10px;
        padding-left: 0.5%;font-size: 16px;cursor: pointer;"></ion-icon>
                    <span style="color:#057dcd; cursor: pointer;"
                        (click)="addList(awards, educationObj);editEducation(awards.length-1, true)">
                        Add award certification</span>
                </ion-row>
                <ion-item class="divider"></ion-item>
            </div> -->

            <div style="margin-top: 3%">
                <ion-row class="titleRow">
                    <ion-col size="4.5" style="display: inline-flex;text-overflow: ellipsis;
                    white-space: nowrap;overflow: hidden;">
                        <ion-label>CERTIFICATE NAME</ion-label>
                    </ion-col>
                    <ion-col size="2.5" style="text-align: center;text-overflow: ellipsis;
                    white-space: nowrap;overflow: hidden;">
                        <ion-label>ENROLL YEAR</ion-label>
                    </ion-col>
                    <ion-col size="2.5" style="text-align: center;text-overflow: ellipsis;
                    white-space: nowrap;overflow: hidden;">
                        <ion-label>GRADUATE YEAR</ion-label>
                    </ion-col>
                    <ion-col>
                    </ion-col>
                </ion-row>

                <ion-row class="detailsRow" *ngFor="let item of awards; let i = index">
                    <ion-col size="4.5" style="text-overflow: ellipsis;white-space: nowrap;overflow: hidden;">
                        <span *ngIf="!showEditProfile">{{item.certificationName}}</span>
                        <mat-form-field *ngIf="showEditProfile" style="width: 100%;">
                            <input matInput placeholder="Certification Name" [(ngModel)]="item.certificationName">
                        </mat-form-field>
                    </ion-col>
                    <ion-col size="2.5" class="colOfLeave" style="text-align: center;text-overflow: ellipsis;
                    white-space: nowrap;overflow: hidden;">
                        <span *ngIf="!showEditProfile">{{item.certificationEnrollYear}}</span>
                        <mat-form-field *ngIf="showEditProfile" style="width: 100%;">
                            <input matInput placeholder="Certification enroll year"
                                [(ngModel)]="item.certificationEnrollYear">
                        </mat-form-field>
                    </ion-col>
                    <ion-col size="2.5" class="colOfLeave" style="text-align: center;text-overflow: ellipsis;
                    white-space: nowrap;overflow: hidden;">
                        <span *ngIf="!showEditProfile">{{item.certificationGraduateYear}}</span>
                        <mat-form-field *ngIf="showEditProfile" style="width: 100%;">
                            <input matInput placeholder="Certification graduate year"
                                [(ngModel)]="item.certificationGraduateYear">
                        </mat-form-field>
                    </ion-col>
                    <ion-col align-self-end style="text-overflow: ellipsis;white-space: nowrap;overflow: hidden;">
                        <ion-button *ngIf="showAttach" shape="round" fill="outline" float-right style="margin-right: 7%; margin-top: -0.2%;font-size: 10px;
                                height: 27px;" (click)="file.click();">
                            Attachment
                        </ion-button>
                        <ion-button *ngIf="!showAttach" shape="round" fill="outline" float-right style="margin-right: 7%; margin-top: -0.2%;font-size: 10px;
                                height: 27px;" (click)="showAttach = true;updateCertificate()">
                            Upload
                        </ion-button>
                    </ion-col>
                    <ion-item class="divider" lines="full"></ion-item>
                    <br>
                    <br>
                </ion-row>
                <input style="display:none" #file name="file" type="file" (change)="preview(file.files)">
                <div class="imgClass" *ngIf="showImg">
                    <img class="uploadedImg" [src]="imgURL">
                    <ion-icon class="closeIcon" name="close" (click)="clickToHideAttachment()"></ion-icon>
                </div>
                <div class="pdfClass" *ngIf="showPdf">
                    <pdf-viewer style="width: 100px;height: 100px;overflow: hidden;" [src]="imgURL"
                        [original-size]="false"></pdf-viewer>
                    <ion-icon class="closeIcon" name="close" (click)="clickToHideAttachment()"></ion-icon>
                </div>
                <span style="margin-left: 2%;" *ngIf="!showPdf || !showImg">{{filename}}</span>
            </div>

            <!-- Add details -->
            <!-- <ion-row class="detailsRow">
                <!-- [style.padding-bottom.%]="showEditProfile? 5: 0" -->
            <!-- *ngIf="(spouseItems === undefined || childItems === undefined || eduList === undefined)" --
                <p style="width: 100%">Your profile missing these details</p>
                <br>
                <br>
                <ion-col [style.cursor]="(spouseItems === undefined || childItems === undefined) ? 'pointer' : ''"
                    style="background: #006994; border-radius: 3px;padding: 20px;height: 100px;"
                    (click)="showFamily = true;">
                    <span style="color: white; font-size: 18px;">Add award </span>
                    <br>
                    <span style="color: white; font-size: 18px;">information</span>
                    <div class="award-icon" [inlineSVG]="'assets/icon/user_profile/trophy.svg'"></div>

                </ion-col>
                <div style="width: 20px"></div>
                <ion-col [style.cursor]="(eduList === undefined) ? 'pointer' : ''"
                    style="background: #5f4180; border-radius: 3px;padding: 20px;height: 100px;"
                    (click)="showEducation = true;">
                    <span style="color: white; font-size: 18px;">Add certificate </span>
                    <br>
                    <span style="color: white; font-size: 18px;">information</span>
                    <div class="certificate-icon" [inlineSVG]="'assets/icon/user_profile/certificate.svg'"></div>
                </ion-col>
            </ion-row> -->
        </ion-card-content>
    </div>
</ion-card>